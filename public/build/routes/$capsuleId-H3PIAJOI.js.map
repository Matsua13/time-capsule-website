{
  "version": 3,
  "sources": ["../../../app/routes/$capsuleId.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/$capsuleId.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/$capsuleId.tsx\");\n  import.meta.hot.lastModified = \"1740077024632.2278\";\n}\n// REMIX HMR END\n\n// app/routes/capsule/$capsuleId.tsx\nimport { json } from \"@remix-run/node\";\nimport { useLoaderData, Link } from \"@remix-run/react\";\nimport { requireUser } from \"~/utils/auth.server\";\nimport { db } from \"~/utils/db.server\";\nexport const loader = async ({\n  request,\n  params\n}) => {\n  const currentUser = await requireUser(request);\n  const capsuleId = params.capsuleId;\n  console.log(\"Requ\u00EAte re\u00E7ue pour capsule ID:\", capsuleId); // V\u00E9rifie la r\u00E9ception de l'ID\n\n  if (!capsuleId) {\n    throw new Response(\"Missing capsule ID\", {\n      status: 400\n    });\n  }\n  const capsule = await db.capsule.findUnique({\n    where: {\n      id: parseInt(capsuleId)\n    },\n    include: {\n      media: true,\n      owner: true\n    }\n  });\n  if (!capsule) {\n    throw new Response(\"Capsule not found\", {\n      status: 404\n    });\n  }\n  // Pr\u00E9-calculer la date format\u00E9e en mode fixe (ici, en UTC par exemple)\n  const formattedScheduledDate = new Date(capsule.scheduledDate).toLocaleString(\"en-US\", {\n    timeZone: \"UTC\"\n  });\n  return json({\n    capsule: {\n      ...capsule,\n      formattedScheduledDate // Ajout de la date pr\u00E9-format\u00E9e\n    },\n    currentUser\n  });\n};\nexport default function CapsuleDetail() {\n  _s();\n  console.log(\"Capsule Detail est rendu\");\n  const {\n    capsule,\n    currentUser\n  } = useLoaderData();\n  return <div className=\"min-h-screen p-4 bg-gradient-to-br from-sky-300 to-sky-500 text-gray-900\">\n      <div className=\"max-w-3xl mx-auto bg-white p-8 rounded-3xl shadow-xl border-4 border-yellow-500\">\n        <h1 className=\"text-4xl font-extrabold drop-shadow-lg mb-4\">\n          {capsule.title}\n        </h1>\n        <p className=\"mb-4 text-lg\">{capsule.content}</p>\n        <p className=\"mb-4 text-sm text-gray-600\">\n          Opening day: {new Date(capsule.scheduledDate).toLocaleString()}\n        </p>\n        <p className=\"mb-4 text-sm text-gray-600\">\n          Visibility: {capsule.visibility}\n        </p>\n        {capsule.ownerId !== currentUser.id && <p className=\"mb-4 text-sm text-gray-600\">\n            Sent by {capsule.recipientType}:{\" \"}\n            {capsule.owner.username || capsule.owner.email}\n          </p>}\n        {capsule.visibility === \"group\" && capsule.groupRecipient && <p className=\"mb-4 text-sm text-gray-600\">\n            (Group capsule intended for {capsule.recipientType}:{\" \"}\n            {capsule.groupRecipient})\n          </p>}\n        {capsule.media && capsule.media.length > 0 && <div className=\"mb-4\">\n            <h2 className=\"text-2xl font-semibold mb-2\">\n              Special gifts with your capsule\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {capsule.media.map(media => <div key={media.id} className=\"p-2 border rounded\">\n                  {media.type.startsWith(\"image\") ? <img src={media.url} alt=\"\" className=\"w-full\" /> : media.type.startsWith(\"video\") ?\n            // eslint-disable-next-line jsx-a11y/media-has-caption\n            <video controls src={media.url} className=\"w-full\" /> :\n            // eslint-disable-next-line jsx-a11y/media-has-caption\n            <audio controls src={media.url} />}\n                </div>)}\n            </div>\n          </div>}\n        <div className=\"mt-8\">\n          <Link to=\"/dashboard\" className=\"bg-gray-700 text-white px-6 py-3 rounded hover:bg-gray-800 transition\">\n            Back to dashboard\n          </Link>\n        </div>\n      </div>\n    </div>;\n}\n_s(CapsuleDetail, \"yp9pyzqaC1L+OPbVRLhXF8Hov7Y=\", false, function () {\n  return [useLoaderData];\n});\n_c = CapsuleDetail;\nvar _c;\n$RefreshReg$(_c, \"CapsuleDetail\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": []
}
